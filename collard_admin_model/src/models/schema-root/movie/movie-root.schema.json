{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "schema-root/movie",
  "title": "Movie",
  "description": "Movie model",
  "type": "object",
  "allOf": [
    {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "$id": "schemas/movie",
      "title": "Movie base model",
      "description": "Movie model",
      "type": "object",
      "required": [
        "Name",
        "Year",
        "ImdbLink",
        "ImdbScore",
        "Genres",
        "Director",
        "LeadingActors"
      ],
      "properties": {
        "Name": {
          "type": "string",
          "minLength": 2,
          "description": "Name of a movie"
        },
        "Year": {
          "type": "number",
          "description": "Year of production"
        },
        "OriginalCountry": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["Id", "Name"],
            "properties": {
              "Id": {
                "type": "string",
                "pattern": "[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"
              },
              "Name": { "type": "string" }
            },
            "additionalProperties": false
          }
        },
        "OriginalLanguage": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["Id", "Name"],
            "properties": {
              "Id": {
                "type": "string",
                "pattern": "[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"
              },
              "Name": { "type": "string" }
            },
            "additionalProperties": false
          }
        },
        "ImdbLink": { "type": "string" },
        "ImdbScore": { "type": "number" },
        "Genres": {
          "type": "array",
          "maxItems": 3,
          "items": {
            "type": "string",
            "enum": [
              "Animation",
              "Action",
              "Comedy",
              "Family",
              "Horror",
              "Thriller",
              "Crime",
              "Drama",
              "Romance",
              "Fantasy"
            ]
          }
        },
        "LeadingActors": {
          "type": "array",
          "maxItems": 3,
          "items": {
            "type": "object",
            "required": ["Id", "Name"],
            "properties": {
              "Id": {
                "type": "string",
                "pattern": "[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"
              },
              "Name": { "type": "string" }
            },
            "additionalProperties": false
          },
          "description": "Leading actors"
        },
        "Director": {
          "description": "Director",
          "type": "object",
          "required": ["Id", "Name"],
          "properties": {
            "Id": {
              "type": "string",
              "pattern": "[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"
            },
            "Name": { "type": "string" }
          },
          "additionalProperties": false
        },
        "ImagesUrls": { "type": "array", "items": { "type": "string" } }
      },
      "additionalProperties": false
    },
    {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "$id": "schemas/base-document",
      "title": "BaseDocument",
      "description": "Base properties of all documents in db",
      "type": "object",
      "required": ["_ts", "Id"],
      "properties": {
        "_ts": {
          "type": "number",
          "description": "timestamp of creation"
        },
        "id": {
          "type": "string",
          "pattern": "[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"
        }
      },
      "additionalProperties": false
    }
  ],
  "additionalProperties": false
}
